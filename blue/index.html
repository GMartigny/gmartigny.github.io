<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Blue</title>
    <link rel="stylesheet" href="style.css" type="text/css"/>
</head>
<body>
    <div class="spot" style="left: 10%"></div>
    <div class="spot" style="left: 40%; animation-delay: -.1s;; animation-duration: 1.3s"></div>
    <div class="spot" style="left: 60%; animation-delay: -.4s; animation-duration: 1.5s; animation-direction: reverse"></div>
    <div class="spot" style="left: 90%; animation-delay: -.15s; animation-duration: 1.8s"></div>
    <div class="floor"></div>
    <div class="boombox" style="left: 15%">
        <div class="mouth single"></div>
        <div class="mouth single"></div>
    </div>
    <div class="boombox" style="right: 15%">
        <div class="mouth single"></div>
        <div class="mouth single"></div>
    </div>
    <div class="blue">
        <div class="bottom single">
            <div class="leg matter glow">
                <div class="foreleg matter single"></div>
            </div>
            <div class="leg matter">
                <div class="foreleg matter single"></div>
            </div>
        </div>
        <div class="body single">
            <div class="head single matter glow">
                <div class="eyes single"></div>
            </div>
            <div class="belly matter single"></div>
            <div class="torso matter glow">
                <div class="arm matter glow">
                    <div class="forearm single matter glow">
                        <div class="fist matter glow"></div>
                    </div>
                </div>
                <div class="arm matter glow">
                    <div class="forearm single matter glow">
                        <div class="fist matter glow"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        (function() {
            var squad = 5;
            var template = document.querySelector(".blue");

            for (let i = 0; i < squad; ++i) {
                let left = (i + 1) * (100 / (squad + 1)) + "%";
                if (i) {
                    let newNode = template.cloneNode(true);
                    newNode.style.left = left;
                    document.body.appendChild(newNode);
                }
                else {
                    template.style.left = left;
                }
            }

            function rand (max) {
                return Math.floor(Math.random() * max);
            }
            Array.prototype.random = function () {
                return this[rand(this.length)];
            };

            // randomize eyes blink
            document.querySelectorAll(".eyes").forEach(function(eye) {
                eye.style.animationDelay = rand(4000) + "ms";
                eye.style.animationDuration = 3000 + rand(1000) + "ms"
            });

            var danceMoves = ["wave", "cowboy", "carlton"];
            var current;
            function changeDance () {
                var sel = danceMoves.filter(function (move) {
                    return move != current;
                }).random();
                current = sel;
                document.body.className = sel;
            }
            setInterval(changeDance, 2000);
            changeDance();
        })();
    </script>
</body>
</html>