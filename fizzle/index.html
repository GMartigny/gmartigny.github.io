<meta charset="UTF-8">
<style>
    *{
        box-sizing: border-box;
    }
    body{
        margin: 0;
        background: #000;
    }
    #menu{
        position: absolute;
        background: #777;
        width: 350px;
        padding: 10px;
    }
    #menu h2{
        position: relative;
        color: #FFF;
        margin: 1.3em 0 .3em;
        text-shadow: 1px 1px 3px #222;
    }
    #menu input{
        width: 100%;
    }
    #can{
        display: block;
        width: 800px;
        margin: 0 auto;
    }
    #expendable{
        cursor: pointer;
    }
    #expendable:after{
        content: "";
        position: absolute;
        top: calc(50% - 10px);
        right: 0;
        width: 0;
        height: 0;
        border: 10px solid;
        border-color: rgba(255,255,255,0) rgba(255,255,255,0) rgba(255,255,255,0) #FFF;
        transition: all linear .1s;
        -webkit-transform-origin: 25% 50%;
    }
    #expendable.expended:after{
        -webkit-transform: rotate(90deg);
    }
    #output{
        overflow: hidden;
        margin: 0;
        padding: 0;
        border: 0;
        transition: height linear .3s;
        height: 180px;
        max-width: 100%;
        width: 100%;
    }
    #output.hidden{
        height: 0;
    }
</style>
<div id="menu">
    <h2>Text</h2>
    <input type="text" id="txt" value="Hellow"/>
    <h2>Font size</h2>
    <input type="range" id="siz" min="0" max="1" step="0.01" value="0.5"/>
    <h2>Bubble size</h2>
    <input type="range" id="fat" min="0" max="1" step="0.01" value="0.5"/>
    <h2>Freedom</h2>
    <input type="range" id="fre" min="0" max="1" step="0.01" value="0.5"/>
    <h2>Exitement</h2>
    <input type="range" id="vit" min="0" max="1" step="0.01" value="0.5"/>
    <h2>Density</h2>
    <input type="range" id="den" min="0" max="1" step="0.01" value="0.5"/>
    <h2 onclick="toggleOptions();" id="expendable">Options</h2>
    <textarea id="output" class="hidden" onclick="select(this);" readonly></textarea>
    <a href="fizzle.js">Script file</a>
</div>
<canvas id="can" width="800" height="400"></canvas>
<script src="fizzle.js"></script>
<script>
    var can = document.getElementById('can'),
        ctx = can.getContext("2d");

    /* DEFAULT OPTIONS */
    /* values should go from 0 to 1 but can overflow (unless density which is cap for perfomance's sake) */

    Fizzle.text = "Hellow";
    Fizzle.size = 0.5;
    Fizzle.density = 0.5;
    Fizzle.colors = ["#0ED", "#F32", "#FE0", "#1C0", "#F8E"];

    Dot.speed = 0.5;
    Dot.fat = 0.5;
    Dot.freedom = 0.5;

    start(ctx);
</script>
<script type="text/javascript">
    /** Page Scripts **/
    var out = document.getElementById('output'),
        drag = {
            elem: 0,
            prev: 0
        };

    document.getElementById('txt').onkeyup = function(){
        if(Fizzle.text != this.value){
            Fizzle.text = this.value;
            start(ctx);
            writeOptions();
        }
    };
    document.getElementById('siz').onmousedown =
    document.getElementById('fat').onmousedown =
    document.getElementById('fre').onmousedown =
    document.getElementById('vit').onmousedown =
    document.getElementById('den').onmousedown = function(){
        drag.elem = this;
    };
    window.onmousemove = changeValue;
    window.onmouseup = function(){
        changeValue();
        drag.elem = 0;
    };
    function changeValue(){
        if(drag.elem && drag.prev != drag.elem.value){
            var redraw = 0;
            switch(drag.elem.id){
                case "siz":
                    Fizzle.size = drag.elem.value;
                    redraw = 1;
                    break;
                case "fat":
                    Dot.fat = drag.elem.value;
                    break;
                case "fre":
                    Dot.freedom = drag.elem.value;
                    break;
                case "vit":
                    Dot.speed = drag.elem.value;
                    break;
                case "den":
                    Fizzle.density = drag.elem.value;
                    redraw = 1;
                    break;
            }
            writeOptions();

            drag.prev = drag.elem.value;
            if(redraw) start(ctx);
        }
    }

    writeOptions();
    function writeOptions(){
        out.value = "Fizzle.text = \"" + Fizzle.text + "\";\n";
        out.value += "Fizzle.size = " + Fizzle.size + ";\n";
        out.value += "Fizzle.density = " + Fizzle.density + ";\n";
        out.value += "Fizzle.colors = " + JSON.stringify(Fizzle.colors) + ";\n\n";

        out.value += "Dot.speed = " + Dot.speed + ";\n";
        out.value += "Dot.fat = " + Dot.fat + ";\n";
        out.value += "Dot.freedom = " + Dot.freedom + ";\n";
    }

    function toggleOptions(){
        var exp = document.getElementById("expendable");
        if(out.classList.toggle("hidden"))
            exp.classList.remove("expended");
        else
            exp.classList.add("expended");
    }
</script>