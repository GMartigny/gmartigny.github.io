
var sqrt=Math.sqrt,pow=Math.pow,sq=function(a){return pow(a,2)};CanvasRenderingContext2D.prototype.splineThrought=function(f,c,a){c=c==undefined?0.5:c;if(f.length>=6){this.save();var d=[],e=f.length;if(a){f.push(f[0],f[1],f[2],f[3]);f.unshift(f[e-1]);f.unshift(f[e-1]);for(var b=0;b<e;b+=2){d=d.concat(getControlPoints(f[b],f[b+1],f[b+2],f[b+3],f[b+4],f[b+5],c))}d=d.concat(d[0],d[1]);for(var b=2;b<e+2;b+=2){this.moveTo(f[b],f[b+1]);this.bezierCurveTo(d[2*b-2],d[2*b-1],d[2*b],d[2*b+1],f[b+2],f[b+3])}}else{for(var b=0;b<e-4;b+=2){d=d.concat(getControlPoints(f[b],f[b+1],f[b+2],f[b+3],f[b+4],f[b+5],c))}for(var b=2;b<f.length-5;b+=2){this.moveTo(f[b],f[b+1]);this.bezierCurveTo(d[2*b-2],d[2*b-1],d[2*b],d[2*b+1],f[b+2],f[b+3])}this.moveTo(f[0],f[1]);this.quadraticCurveTo(d[0],d[1],f[2],f[3]);this.moveTo(f[e-2],f[e-1]);this.quadraticCurveTo(d[2*e-10],d[2*e-9],f[e-4],f[e-3])}this.restore()}else{if(f.length>=4){this.moveTo(f[0],f[1]);this.lineTo(f[2],f[3])}}};function getControlPoints(e,m,d,l,c,k,o){var n=sqrt(sq(d-e)+sq(l-m));var h=sqrt(sq(c-d)+sq(k-l));var g=o*n/(n+h);var f=o-g;var b=d+g*(e-c);var a=l+g*(m-k);var j=d-f*(e-c);var i=l-f*(m-k);return[b,a,j,i]};