
function SocketManager(b,c){var a=this;this.socket=new WebSocket(b);this.protocol=c;this.socket.onopen=function(d){if(a.onopen){a.onopen.call(a,d)}};this.socket.onerror=function(d){if(a.onerror){a.onerror.call(a,d)}};this.socket.onmessage=function(d){a.onmessage.call(a,d)};this.socket.onclose=function(d){if(a.onclose){a.onclose.call(a,d)}}}SocketManager.prototype={onopen:null,onsend:null,onmessage:function(a){var b=JSON.parse(a.data);if(this.protocol[b.type]){this.protocol[b.type](b.message)}},onerror:null,onclose:null,send:function(a){a._timestamp=Date.now();this.socket.send(JSON.stringify(a));if(this.onsend){this.onsend(a)}}};