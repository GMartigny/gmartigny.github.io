
function EntityManager(a,b){this.entities=[]}EntityManager.prototype={moveAll:function(b,a){this.entities.forEach(function(c){c.move(b,a)})},renderAll:function(a){this.entities.forEach(function(b){b.render(a)})}};function Entity(b,a){this.isAnimated=0;this.animSpeed=0;this.anim=0;this.isMoving=0;this.moveSpeed=0;this.pos=b;this.dir=a||Player.DIR_DOWN}Entity.prototype={render:function(b){var c=round(2/PI*asin(sin(this.anim))+1),a=GameController.cell;this.layer.drawImage(this.img,a*c,a*this.dir,a,a,(this.pos.x-b.x)*a,(this.pos.y-b.y)*a,a,a)},move:function(b,a){if(this.isMoving-->0){switch(this.dir){case Player.DIR_UP:this.pos.y-=this.moveSpeed;break;case Player.DIR_RIGHT:this.pos.x+=this.moveSpeed;break;case Player.DIR_DOWN:this.pos.y+=this.moveSpeed;break;case Player.DIR_LEFT:this.pos.x-=this.moveSpeed}}else{this.isMoving=0}if(this.isAnimated-->0){this.anim+=this.animSpeed}}};