
function GameController(b){this.map=new MapManager(b.links);var a=prepareCanvas("c",GameController.nbCol*GameController.cell,GameController.nbRow*GameController.cell);this.player=new Player(a.player.ctx,b.player);this.entities=new EntityManager(a.entities.ctx,b.entities);this.view=new ViewManager(a,b.tiles,this.map.getMap());this.key=new KeyboardManager();var c=this.view.overlay;this.fps=new FPS(function(d){c.ctx.clear();c.ctx.fillText(d,5,15)},200);this.render()}GameController.cell=32;GameController.nbRow=21;GameController.nbCol=35;GameController.prototype.render=function(){var a=this;raf(function(){a.render.call(a)});if(this.view.ready){this.player.move(this.key,this.view);this.player.render();this.entities.renderAll(this.view,this.player);this.view.renderAll(this.player.pos.x-this.player.display.x,this.player.pos.y-this.player.display.y);this.fps.update()}else{this.view.checkReady()}};GameController.prototype.teleport=function(a){this.map.changeMap(a);this.view.setMap(this.map.getMap())};