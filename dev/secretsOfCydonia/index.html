<html>
    <head>
        <title>Secret of Cydonia</title>
        <link rel="stylesheet" href="style.css"/>
        <script src="js/gameLib.js"></script>
        <script src="../../res/js/fps.js"></script>
    </head>
    <body>
        <div id="c">
            <canvas id="ground" width="800" height="608"></canvas>
            <canvas id="under" width="800" height="608"></canvas>
            <canvas id="block" width="800" height="608"></canvas>
            <canvas id="player" width="800" height="608"></canvas>
            <canvas id="over" width="800" height="608"></canvas>
            <canvas id="super" width="800" height="608"></canvas>
            <div id="loading"><img src="res/loader.gif" alt="Loading"/></div>
        </div>
    <script>
    var media = loadMedia([
        {src: "js/Game.js", weight: 1},
        {src: "js/Player.js", weight: 1},
        {src: "js/View.js", weight: 1},
        {src: "js/views/Ground.js", weight: 1},
        {src: "js/views/Under.js", weight: 1},
        {src: "js/views/Block.js", weight: 1},
        {src: "js/views/Over.js", weight: 1},
        {src: "js/Keyboard.js", weight: 1},
        {src: "res/perso.png", weight: 2.5, name:"player"},
        {src: "res/tiles.png", weight:7.7, name: "tiles"},
        {src: "res/links.json", weight:1, name: "links"}
    ], function(r){
        if(100 <= r) start();
        else{
            // loading
        }
    }),
        canvas = prepareCanvas(getById("c"));

    function start(){
        new GameManager(canvas, media);
        getById("loading").style.display = "none";
    }
    
    function prepareCanvas(holder){
        var cs = holder.getElementsByTagName("canvas"),
            objs = {};
        for(var i=0;i<cs.length;++i){
            objs[cs[i].id] = {};
            objs[cs[i].id].can = cs[i];
            objs[cs[i].id].ctx = cs[i].getContext("2d");
        }
        return objs;
    }
    </script>
    </body>
</html>